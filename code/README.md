# SCRMç³»ç»Ÿ - ä¼ä¸šç§åŸŸè¿è¥å¹³å°

> åŸºäºNode.js + Midway.js + Vue3çš„ä¼ä¸šçº§SCRMç³»ç»Ÿ

---

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¼ä¸šçº§SCRM (Social Customer Relationship Management) ç§åŸŸè¿è¥ç³»ç»Ÿï¼Œé‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œæ”¯æŒå¤šæ¸ é“è·å®¢ã€ç²¾ç»†åŒ–è¿è¥ã€æ•°æ®åˆ†æç­‰å…¨é“¾è·¯åŠŸèƒ½ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸš€ **å…¨åŸŸå¼•æµ**: æ”¯æŒæŠ–éŸ³ã€å°çº¢ä¹¦ã€å¾®ä¿¡ç­‰å¤šå¹³å°å¼•æµè‡³ä¼ä¸šå¾®ä¿¡
- ğŸ¤– **æ™ºèƒ½è¿è¥**: SOPè‡ªåŠ¨åŒ–ã€æ™ºèƒ½æ ‡ç­¾ã€AIè¾…åŠ©è¿è¥
- ğŸ“Š **æ•°æ®é©±åŠ¨**: 12+ç»´åº¦æ•°æ®åˆ†æã€BIçœ‹æ¿ã€ROIè¿½è¸ª
- ğŸ›¡ï¸ **èµ„äº§ä¿æŠ¤**: å®¢æˆ·ç»§æ‰¿æœºåˆ¶ã€æµå¤±é¢„è­¦ã€åˆè§„é£æ§
- ğŸ¯ **å¤šç«¯ååŒ**: PCç«¯ã€ç§»åŠ¨ç«¯ã€ä¼å¾®ä¾§è¾¹æ å…¨è¦†ç›–

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ

**å‰ç«¯æŠ€æœ¯æ ˆ:**
- **æ¡†æ¶**: Vue 3.3+ (Composition API)
- **æ„å»ºå·¥å…·**: Vite 4.x
- **è¯­è¨€**: TypeScript 5.x
- **çŠ¶æ€ç®¡ç†**: Pinia 2.x
- **UIç»„ä»¶**: Element Plusã€Ant Design Vueã€NutUI
- **å›¾è¡¨**: ECharts 5.x
- **å®˜ç½‘**: Nuxt 4 (SSR/SSG)
- **ç§»åŠ¨ç«¯**: UniApp + NutUI

**åç«¯æŠ€æœ¯æ ˆ:**
- **è¿è¡Œç¯å¢ƒ**: Node.js 18 LTS
- **åº”ç”¨æ¡†æ¶**: Midway.js 3.x
- **è¯­è¨€**: TypeScript 5.x
- **ORM**: TypeORM 0.3.x
- **æ•°æ®åº“**: MySQL 8.0ã€Redis 7.0ã€MongoDB 6.0
- **æ¶ˆæ¯é˜Ÿåˆ—**: RabbitMQ 3.x + Bull 4.x
- **APIæ–‡æ¡£**: Swagger (Midway)

### æ¶æ„æ¨¡å¼

- **å‰ç«¯**: Monorepo (pnpm workspace)
- **åç«¯**: å¾®æœåŠ¡æ¶æ„ (10ä¸ªç‹¬ç«‹æœåŠ¡)
- **é€šä¿¡**: HTTP + RPC (gRPC) + MQ (RabbitMQ)

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
scrm-system/
â”œâ”€â”€ apps/                       # å‰ç«¯åº”ç”¨å±‚ (7ä¸ªç‹¬ç«‹åº”ç”¨)
â”‚   â”œâ”€â”€ official-website/       # å®˜æ–¹ç½‘ç«™ (Nuxt 4)
â”‚   â”œâ”€â”€ admin-platform/         # ç®¡ç†å¹³å° (Vue3)
â”‚   â”œâ”€â”€ bi-platform/            # BIåˆ†æå¹³å° (Vue3)
â”‚   â”œâ”€â”€ operation-platform/     # è¿è¥å¹³å° (Vue3)
â”‚   â”œâ”€â”€ saas-admin/             # SaaSç®¡ç†å¹³å° (Vue3)
â”‚   â”œâ”€â”€ finance-platform/       # è´¢åŠ¡å¹³å° (Vue3)
â”‚   â””â”€â”€ mobile-app/             # ç§»åŠ¨ç«¯ (UniApp)
â”‚
â”œâ”€â”€ services/                   # åç«¯å¾®æœåŠ¡å±‚ (10ä¸ªæœåŠ¡)
â”‚   â”œâ”€â”€ gateway-service/        # APIç½‘å…³
â”‚   â”œâ”€â”€ auth-service/           # è®¤è¯æˆæƒ
â”‚   â”œâ”€â”€ customer-service/       # å®¢æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ acquisition-service/    # è·å®¢æœåŠ¡
â”‚   â”œâ”€â”€ operation-service/      # å®¢æˆ·è¿è¥
â”‚   â”œâ”€â”€ asset-service/          # èµ„äº§ç®¡ç†
â”‚   â”œâ”€â”€ analytics-service/      # æ•°æ®åˆ†æ
â”‚   â”œâ”€â”€ integration-service/    # ç¬¬ä¸‰æ–¹é›†æˆ
â”‚   â”œâ”€â”€ message-service/        # æ¶ˆæ¯æ¨é€
â”‚   â””â”€â”€ finance-service/        # è´¢åŠ¡ç®¡ç†
â”‚
â”œâ”€â”€ packages/                   # å…±äº«åŒ…
â”‚   â”œâ”€â”€ shared-types/           # å…±äº«ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ shared-utils/           # å…±äº«å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ shared-constants/       # å…±äº«å¸¸é‡
â”‚   â”œâ”€â”€ ui-components/          # å…±äº«UIç»„ä»¶
â”‚   â””â”€â”€ server-common/          # åç«¯å…¬å…±æ¨¡å—
â”‚
â”œâ”€â”€ scripts/                    # æ„å»º/éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ docs/                       # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ .github/                    # CI/CDé…ç½®
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js**: 18.x LTS
- **pnpm**: 8.x+
- **MySQL**: 8.0+
- **Redis**: 7.0+
- **MongoDB**: 6.0+
- **RabbitMQ**: 3.x+

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…pnpm (å¦‚æœæ²¡æœ‰)
npm install -g pnpm

# å®‰è£…é¡¹ç›®ä¾èµ–
pnpm install
```

### å¯åŠ¨å¼€å‘ç¯å¢ƒ

**1. å¯åŠ¨æ•°æ®åº“ (Docker Compose)**

```bash
docker-compose up -d
```

**2. åˆå§‹åŒ–æ•°æ®åº“**

```bash
cd services/auth-service
pnpm migration:run
pnpm seed
```

**3. å¯åŠ¨åç«¯æœåŠ¡**

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
pnpm dev:service

# æˆ–å•ç‹¬å¯åŠ¨æŸä¸ªæœåŠ¡
cd services/gateway-service
pnpm dev
```

**4. å¯åŠ¨å‰ç«¯åº”ç”¨**

```bash
# å¯åŠ¨æ‰€æœ‰å‰ç«¯åº”ç”¨
pnpm dev:web

# æˆ–å•ç‹¬å¯åŠ¨æŸä¸ªåº”ç”¨
cd apps/operation-platform
pnpm dev
```

### è®¿é—®åº”ç”¨

- å®˜æ–¹ç½‘ç«™: http://localhost:3000
- ç®¡ç†å¹³å°: http://localhost:3001
- BIå¹³å°: http://localhost:3002
- è¿è¥å¹³å°: http://localhost:3003
- SaaSç®¡ç†: http://localhost:3004
- è´¢åŠ¡å¹³å°: http://localhost:3005
- APIç½‘å…³: http://localhost:7000
- APIæ–‡æ¡£: http://localhost:7000/swagger-ui

---

## ğŸ“¦ æ¨¡å—è¯´æ˜

### å‰ç«¯åº”ç”¨ (apps/)

| åº”ç”¨ | ç«¯å£ | ç”¨æˆ·è§’è‰² | æ ¸å¿ƒåŠŸèƒ½ |
|------|------|---------|---------|
| **å®˜æ–¹ç½‘ç«™** | 3000 | è®¿å®¢ | äº§å“ä»‹ç»ã€æ¡ˆä¾‹å±•ç¤ºã€ä»·æ ¼å¥—é¤ |
| **ç®¡ç†å¹³å°** | 3001 | ä¼ä¸šç®¡ç†è€…/ITç®¡ç†å‘˜ | ä¼ä¸šç®¡ç†ã€æƒé™é…ç½®ã€ç³»ç»Ÿè®¾ç½® |
| **BIå¹³å°** | 3002 | ç®¡ç†è€…/å¸‚åœºäººå‘˜ | æ•°æ®æ¦‚è§ˆã€æ¸ é“åˆ†æã€è½¬åŒ–åˆ†æ |
| **è¿è¥å¹³å°** | 3003 | è¿è¥/é”€å”®/å¸‚åœº | è·å®¢ç®¡ç†ã€å®¢æˆ·è¿è¥ã€SOPé…ç½® |
| **SaaSç®¡ç†** | 3004 | å¹³å°è¿è¥ | ç§Ÿæˆ·ç®¡ç†ã€å¥—é¤ç®¡ç†ã€ç³»ç»Ÿç›‘æ§ |
| **è´¢åŠ¡å¹³å°** | 3005 | è´¢åŠ¡äººå‘˜ | è®¢å•ç®¡ç†ã€æ”¶æ¬¾ç®¡ç†ã€è´¢åŠ¡æŠ¥è¡¨ |
| **ç§»åŠ¨ç«¯** | - | é”€å”®äººå‘˜ | å®¢æˆ·ç®¡ç†ã€å¾…åŠä»»åŠ¡ã€ç§»åŠ¨åŠå…¬ |

### åç«¯æœåŠ¡ (services/)

| æœåŠ¡ | ç«¯å£ | èŒè´£ |
|------|------|------|
| **gateway-service** | 7000 | APIç½‘å…³ã€è·¯ç”±è½¬å‘ã€è®¤è¯é‰´æƒã€é™æµç†”æ–­ |
| **auth-service** | 7001 | ç”¨æˆ·è®¤è¯ã€æƒé™ç®¡ç†ã€JWTç­¾å‘ |
| **customer-service** | 7002 | å®¢æˆ·ä¿¡æ¯ç®¡ç†ã€æ ‡ç­¾ç®¡ç†ã€å®¢æˆ·ç”»åƒ |
| **acquisition-service** | 7003 | å¤šæ¸ é“è·å®¢ã€æ´»ç ç®¡ç†ã€å†…å®¹å‘å¸ƒ |
| **operation-service** | 7004 | å®¢æˆ·è¿è¥ã€SOPç®¡ç†ã€æ¶ˆæ¯ç¾¤å‘ |
| **asset-service** | 7005 | å®¢æˆ·èµ„äº§ç®¡ç†ã€æ™ºèƒ½é¢„è­¦ã€æ•°æ®ç»Ÿè®¡ |
| **analytics-service** | 7006 | æ•°æ®åˆ†æã€BIæŠ¥è¡¨ã€æŒ‡æ ‡è®¡ç®— |
| **integration-service** | 7007 | ä¼å¾®/æŠ–éŸ³/å°çº¢ä¹¦ç¬¬ä¸‰æ–¹é›†æˆ |
| **message-service** | 7008 | æ¶ˆæ¯æ¨é€ã€é€šçŸ¥ç®¡ç†ã€æ¨¡æ¿ç®¡ç† |
| **finance-service** | 7009 | è®¢å•ç®¡ç†ã€æ”¯ä»˜å¯¹æ¥ã€è´¢åŠ¡ç»“ç®— |

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### å‘½åè§„èŒƒ

**å‰ç«¯ (kebab-case):**
- æ–‡ä»¶/ç»„ä»¶: `user-profile.vue`
- Hooks: `use-customer.ts`
- ä¼˜å…ˆä½¿ç”¨ Composition API + Hooks

**åç«¯ (PascalCase):**
- ç±»/æœåŠ¡: `CustomerService`
- å®ä½“: `CustomerEntity`
- DTO: `CreateCustomerDto`
- APIè·¯å¾„: `/api/v1/customers` (kebab-case)

### ä»£ç è§„èŒƒ

```bash
# ä»£ç æ£€æŸ¥
pnpm lint

# ä»£ç æ ¼å¼åŒ–
pnpm format

# ç±»å‹æ£€æŸ¥
pnpm type-check

# å•å…ƒæµ‹è¯•
pnpm test

# E2Eæµ‹è¯•
pnpm test:e2e
```

### æäº¤è§„èŒƒ

éµå¾ª Conventional Commits:

```
feat: æ–°åŠŸèƒ½
fix: Bugä¿®å¤
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼
refactor: é‡æ„
perf: æ€§èƒ½ä¼˜åŒ–
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·å˜åŠ¨
```

---

## ğŸ“š æ–‡æ¡£

- [éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦](../mvp/éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦.md)
- [æŠ€æœ¯é€‰å‹æ–‡æ¡£](../mvp/æŠ€æœ¯é€‰å‹.md)
- [APIæ–‡æ¡£](./docs/api/)
- [æ¶æ„è®¾è®¡](./docs/architecture/)
- [å¼€å‘æ–‡æ¡£](./docs/development/)

---

## ğŸ”’ ç¯å¢ƒå˜é‡

æ¯ä¸ªæœåŠ¡/åº”ç”¨éœ€è¦é…ç½®ç›¸åº”çš„ç¯å¢ƒå˜é‡ï¼Œå‚è€ƒå„æ¨¡å—çš„ `.env.example` æ–‡ä»¶ã€‚

**å…³é”®ç¯å¢ƒå˜é‡:**
- `NODE_ENV`: è¿è¡Œç¯å¢ƒ (development/production)
- `DB_HOST/DB_PORT`: æ•°æ®åº“è¿æ¥
- `REDIS_HOST/REDIS_PORT`: Redisè¿æ¥
- `RABBITMQ_URL`: RabbitMQè¿æ¥
- `JWT_SECRET`: JWTå¯†é’¥
- `OSS_*`: å¯¹è±¡å­˜å‚¨é…ç½®
- `WEWORK_*`: ä¼ä¸šå¾®ä¿¡é…ç½®

---

## ğŸš¢ éƒ¨ç½²

### Dockeréƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
pnpm build:docker

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose -f docker-compose.prod.yml up -d
```

### Kuberneteséƒ¨ç½²

```bash
# åº”ç”¨K8sé…ç½®
kubectl apply -f k8s/

# æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
kubectl get pods -n scrm
```

---

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

- **ç›‘æ§**: Prometheus + Grafana (http://localhost:9090)
- **æ—¥å¿—**: winston + ELK (å¯é€‰)
- **é“¾è·¯è¿½è¸ª**: Jaeger (å¯é€‰)

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat: add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä¸ºå†…éƒ¨é¡¹ç›®ï¼Œæœªç»æˆæƒä¸å¾—å¤–ä¼ ã€‚

---

## ğŸ‘¥ å›¢é˜Ÿ

- **äº§å“å›¢é˜Ÿ**: éœ€æ±‚è§„åˆ’ã€äº§å“è®¾è®¡
- **æŠ€æœ¯å›¢é˜Ÿ**: æ¶æ„è®¾è®¡ã€ç³»ç»Ÿå¼€å‘
- **è¿è¥å›¢é˜Ÿ**: äº§å“è¿è¥ã€ç”¨æˆ·æ”¯æŒ

---

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®ç»ç†: [å¾…å¡«å†™]
- æŠ€æœ¯è´Ÿè´£äºº: [å¾…å¡«å†™]
- é—®é¢˜åé¦ˆ: [å¾…å¡«å†™]

---

**æœ€åæ›´æ–°**: 2025-10-28  
**é¡¹ç›®ç‰ˆæœ¬**: v1.0.0

